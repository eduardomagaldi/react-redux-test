<script>

var result = 0;

// max('abababaaba', 'ababa');
max('dbbaaba', 'ba')

console.log('result', result);

// console.log(, 'expected:', 2, result);
// console.log(max('babbaaba', 'ba'), 'expected:', 2);

// function max(s, t) {
// 	console.log('max(', s, ',', t, ')');
// 	var r = rest(s, t, 0)
// 		results = r.number;

// 	if (results) {
// 		r.rests.forEach(function(restString, i) {
// 			var r2 = rest(restString, t, results);
// 			results = r2.number;
// 		});
// 	}



// 	// console.log('r', r);
// 	// console.log('r[0]', rest(r[0], t));
// 	// console.log('r[1]', rest(r[1], t));

// 	return results;

// 	function rest(s, t, number) {
// 	    var sLength = s.length;
// 	    var tLength = t.length;
// 	    var positions = [];
// 	    var rests = [];

// 	    for (var i = 0; i <= sLength - tLength; i++) {
// 	    	if (s.substr(i, tLength) === t) {
// 	    		positions.push(i);
// 	    	}
// 	    }

// 	    positions.forEach(function(pos, i) {
// 	    	rests.push(
// 	    		s.substr(0, pos) +
// 	    		s.substr(pos + tLength, sLength)
// 	    	);
// 	    });

// 	    if (rests.length) {
// 	    	number += 1;
// 	    }

// 	    return {
// 	    	rests: rests,
// 	    	number: number
// 	    };
// 	}
// }



function max(s, t) {
	console.log('max('+s+', '+t+')');
	var restsArray = rest(s, t);

	if (restsArray.length) {
		result = result + 1;

		restsArray.forEach(function(restString) {
			max(restString, t);
		});
	}

	return result;
}

function rest(s, t) {
	var sLength = s.length;
	var tLength = t.length;
	var positions = [];
	var rests = [];

	for (var i = 0; i <= sLength - tLength; i++) {
		if (s.substr(i, tLength) === t) {
			positions.push(i);
		}
	}

	positions.forEach(function(pos, i) {
		rests.push(
			s.substr(0, pos) +
			s.substr(pos + tLength, sLength)
		);
	});

	return rests;
}

</script>
